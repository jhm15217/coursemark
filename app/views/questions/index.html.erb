<%= render "assignments/header" %>

<% if @questions.length > 0 %>
    <% @questions.each do |question| %>
        <div class="rubricQuestion">
          <%= link_to [:edit, @course, @assignment, question] do %>
              <h2><%= question.question_text %></h2>
          <% end %>
          <h4>
            <%=question.question_weight %> POINTS -
            <%= link_to "Delete", course_assignment_question_path(@course, @assignment, question), method: :delete %>
          </h4>
        </div>

    <% end %>
    <br/>
    <a href=<%= "/courses/#{@course.id}/assignments/#{@assignment.id}/questions?export_rubric=true" %>>
      <div class='button'  >Export Rubric CSV</div></a>
    <br>
<% end %>


<% if (Time.zone.now < @assignment.submission_due) %>
    <%= link_to new_course_assignment_question_path(@course, @assignment, :type => 'yesno') do %>
        <div class='button'>New question</div>
    <% end %>
    <br>
    <form method='post' action="/courses/<%= @course.id.to_s %>/assignments/<%= @assignment.id.to_s %>/questions">
      <div class="field" >
        <textarea cols="120" name="response[questions]" rows="20"></textarea>
      </div>
      <div class="actions">
        <input name="create_rubric" type="submit" value="Load New Questions" />
      </div>
    </form>
<% else %>
    <div class="notice">Rubric questions cannot be added after the submission deadline</div>
<% end %>


<br/>
<div>
  Each line has the form [Question:string,Weight:integer,written_response_required:Boolean,(description:string,value:integer)*]
</div>

